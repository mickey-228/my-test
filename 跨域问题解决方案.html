<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>跨域问题解决方案</title>
  <link rel="stylesheet" href="./惠惠惠的个人知识库.css">
</head>
<body> 
<div class="bar">
   <div class="logo-container">
    <a class="logo">惠惠惠的个人知识库</a>
  </div> 
  </div>
<div class="container">
  <div class="catalog">
    <div class="node"><a href="React_Hooks_基础.html">React Hooks 基础</a></div><div class="node"><a href="CSS_Flexbox_布局.html">CSS Flexbox 布局</a></div><div class="node"><a href="JavaScript_闭包.html">JavaScript 闭包</a></div><div class="node"><a href="TypeScript_类型系统.html">TypeScript 类型系统</a></div><div class="node"><a href="Vue_响应式原理.html">Vue 响应式原理</a></div><div class="node"><a href="Webpack_打包原理.html">Webpack 打包原理</a></div><div class="node"><a href="ES6_模块化.html">ES6 模块化</a></div><div class="node"><a href="浏览器事件循环.html">浏览器事件循环</a></div><div class="node"><a href="HTTP_协议基础.html">HTTP 协议基础</a></div><div class="node"><a href="前端性能优化.html">前端性能优化</a></div><div class="node"><a href="虚拟_DOM_原理.html">虚拟 DOM 原理</a></div><div class="node active"><a href="跨域问题解决方案.html">跨域问题解决方案</a></div><div class="node"><a href="前端路由实现.html">前端路由实现</a></div><div class="node"><a href="状态管理方案.html">状态管理方案</a></div><div class="node"><a href="前端安全防护.html">前端安全防护</a></div><div class="node"><a href="CSS_Grid_布局.html">CSS Grid 布局</a></div><div class="node"><a href="Promise_和异步编程.html">Promise 和异步编程</a></div><div class="node"><a href="JavaScript_原型链.html">JavaScript 原型链</a></div><div class="node"><a href="防抖和节流.html">防抖和节流</a></div><div class="node"><a href="CSS_变量_Custom_Properties.html">CSS 变量（Custom Properties）</a></div><div class="node"><a href="React_组件生命周期.html">React 组件生命周期</a></div><div class="node"><a href="Vue_组件通信.html">Vue 组件通信</a></div><div class="node"><a href="Babel_转译原理.html">Babel 转译原理</a></div><div class="node"><a href="ESLint_代码检查.html">ESLint 代码检查</a></div><div class="node"><a href="Git_工作流.html">Git 工作流</a></div><div class="node"><a href="CSS_Grid_布局_2.html">CSS Grid 布局 (2)</a></div><div class="node"><a href="Promise_和异步编程_2.html">Promise 和异步编程 (2)</a></div><div class="node"><a href="JavaScript_原型链_2.html">JavaScript 原型链 (2)</a></div><div class="node"><a href="防抖和节流_2.html">防抖和节流 (2)</a></div><div class="node"><a href="CSS_变量_Custom_Properties_2.html">CSS 变量（Custom Properties） (2)</a></div><div class="node"><a href="React_组件生命周期_2.html">React 组件生命周期 (2)</a></div><div class="node"><a href="Vue_组件通信_2.html">Vue 组件通信 (2)</a></div><div class="node"><a href="Babel_转译原理_2.html">Babel 转译原理 (2)</a></div><div class="node"><a href="ESLint_代码检查_2.html">ESLint 代码检查 (2)</a></div><div class="node"><a href="Git_工作流_2.html">Git 工作流 (2)</a></div><div class="node"><a href="CSS_Grid_布局_3.html">CSS Grid 布局 (3)</a></div><div class="node"><a href="Promise_和异步编程_3.html">Promise 和异步编程 (3)</a></div><div class="node"><a href="JavaScript_原型链_3.html">JavaScript 原型链 (3)</a></div><div class="node"><a href="防抖和节流_3.html">防抖和节流 (3)</a></div><div class="node"><a href="CSS_变量_Custom_Properties_3.html">CSS 变量（Custom Properties） (3)</a></div><div class="node"><a href="React_组件生命周期_3.html">React 组件生命周期 (3)</a></div><div class="node"><a href="Vue_组件通信_3.html">Vue 组件通信 (3)</a></div><div class="node"><a href="Babel_转译原理_3.html">Babel 转译原理 (3)</a></div><div class="node"><a href="ESLint_代码检查_3.html">ESLint 代码检查 (3)</a></div><div class="node"><a href="Git_工作流_3.html">Git 工作流 (3)</a></div><div class="node"><a href="CSS_Grid_布局_4.html">CSS Grid 布局 (4)</a></div><div class="node"><a href="Promise_和异步编程_4.html">Promise 和异步编程 (4)</a></div><div class="node"><a href="JavaScript_原型链_4.html">JavaScript 原型链 (4)</a></div><div class="node"><a href="防抖和节流_4.html">防抖和节流 (4)</a></div><div class="node"><a href="CSS_变量_Custom_Properties_4.html">CSS 变量（Custom Properties） (4)</a></div><div class="node"><a href="React_组件生命周期_4.html">React 组件生命周期 (4)</a></div><div class="node"><a href="Vue_组件通信_4.html">Vue 组件通信 (4)</a></div><div class="node"><a href="Babel_转译原理_4.html">Babel 转译原理 (4)</a></div><div class="node"><a href="ESLint_代码检查_4.html">ESLint 代码检查 (4)</a></div><div class="node"><a href="Git_工作流_4.html">Git 工作流 (4)</a></div><div class="node"><a href="CSS_Grid_布局_5.html">CSS Grid 布局 (5)</a></div><div class="node"><a href="Promise_和异步编程_5.html">Promise 和异步编程 (5)</a></div><div class="node"><a href="JavaScript_原型链_5.html">JavaScript 原型链 (5)</a></div><div class="node"><a href="防抖和节流_5.html">防抖和节流 (5)</a></div><div class="node"><a href="CSS_变量_Custom_Properties_5.html">CSS 变量（Custom Properties） (5)</a></div><div class="node"><a href="React_组件生命周期_5.html">React 组件生命周期 (5)</a></div><div class="node"><a href="Vue_组件通信_5.html">Vue 组件通信 (5)</a></div><div class="node"><a href="Babel_转译原理_5.html">Babel 转译原理 (5)</a></div><div class="node"><a href="ESLint_代码检查_5.html">ESLint 代码检查 (5)</a></div><div class="node"><a href="Git_工作流_5.html">Git 工作流 (5)</a></div><div class="node"><a href="CSS_Grid_布局_6.html">CSS Grid 布局 (6)</a></div><div class="node"><a href="Promise_和异步编程_6.html">Promise 和异步编程 (6)</a></div><div class="node"><a href="JavaScript_原型链_6.html">JavaScript 原型链 (6)</a></div><div class="node"><a href="防抖和节流_6.html">防抖和节流 (6)</a></div><div class="node"><a href="CSS_变量_Custom_Properties_6.html">CSS 变量（Custom Properties） (6)</a></div><div class="node"><a href="React_组件生命周期_6.html">React 组件生命周期 (6)</a></div><div class="node"><a href="Vue_组件通信_6.html">Vue 组件通信 (6)</a></div><div class="node"><a href="Babel_转译原理_6.html">Babel 转译原理 (6)</a></div><div class="node"><a href="ESLint_代码检查_6.html">ESLint 代码检查 (6)</a></div><div class="node"><a href="Git_工作流_6.html">Git 工作流 (6)</a></div><div class="node"><a href="CSS_Grid_布局_7.html">CSS Grid 布局 (7)</a></div><div class="node"><a href="Promise_和异步编程_7.html">Promise 和异步编程 (7)</a></div><div class="node"><a href="JavaScript_原型链_7.html">JavaScript 原型链 (7)</a></div><div class="node"><a href="防抖和节流_7.html">防抖和节流 (7)</a></div><div class="node"><a href="CSS_变量_Custom_Properties_7.html">CSS 变量（Custom Properties） (7)</a></div><div class="node"><a href="React_组件生命周期_7.html">React 组件生命周期 (7)</a></div><div class="node"><a href="Vue_组件通信_7.html">Vue 组件通信 (7)</a></div><div class="node"><a href="Babel_转译原理_7.html">Babel 转译原理 (7)</a></div><div class="node"><a href="ESLint_代码检查_7.html">ESLint 代码检查 (7)</a></div><div class="node"><a href="Git_工作流_7.html">Git 工作流 (7)</a></div><div class="node"><a href="CSS_Grid_布局_8.html">CSS Grid 布局 (8)</a></div><div class="node"><a href="Promise_和异步编程_8.html">Promise 和异步编程 (8)</a></div><div class="node"><a href="JavaScript_原型链_8.html">JavaScript 原型链 (8)</a></div><div class="node"><a href="防抖和节流_8.html">防抖和节流 (8)</a></div><div class="node"><a href="CSS_变量_Custom_Properties_8.html">CSS 变量（Custom Properties） (8)</a></div><div class="node"><a href="React_组件生命周期_8.html">React 组件生命周期 (8)</a></div><div class="node"><a href="Vue_组件通信_8.html">Vue 组件通信 (8)</a></div><div class="node"><a href="Babel_转译原理_8.html">Babel 转译原理 (8)</a></div><div class="node"><a href="ESLint_代码检查_8.html">ESLint 代码检查 (8)</a></div><div class="node"><a href="Git_工作流_8.html">Git 工作流 (8)</a></div><div class="node"><a href="CSS_Grid_布局_9.html">CSS Grid 布局 (9)</a></div><div class="node"><a href="Promise_和异步编程_9.html">Promise 和异步编程 (9)</a></div><div class="node"><a href="JavaScript_原型链_9.html">JavaScript 原型链 (9)</a></div><div class="node"><a href="防抖和节流_9.html">防抖和节流 (9)</a></div><div class="node"><a href="CSS_变量_Custom_Properties_9.html">CSS 变量（Custom Properties） (9)</a></div>
  </div>
  <div class="content">
    <div class="content-display-area">
      <h1>跨域问题解决方案</h1>
      <div class="content-main">
        <h2>跨域问题解决方案</h2><p>跨域（Cross-Origin）是由于浏览器的同源策略（Same-Origin Policy）导致的限制。当协议、域名或端口不同时，浏览器会阻止跨域请求。</p><h3>同源策略</h3>
<p>同源是指协议、域名、端口三者完全相同。例如：</p>
<ul><li><code>https://example.com</code> 和 <code>http://example.com</code> - 协议不同，跨域</li></ul>
<ul><li><code>https://example.com</code> 和 <code>https://api.example.com</code> - 域名不同，跨域</li></ul>
<ul><li><code>https://example.com:80</code> 和 <code>https://example.com:443</code> - 端口不同，跨域</li></ul><h3>解决方案</h3><h4>1. CORS（跨域资源共享）</h4>
<p>服务器设置响应头允许跨域：</p>
<pre><code>Access-Control-Allow-Origin: *  // 允许所有域名</p>
<p>Access-Control-Allow-Origin: https://example.com  // 允许特定域名</p>
<p>Access-Control-Allow-Methods: GET, POST, PUT</p>
<p>Access-Control-Allow-Headers: Content-Type</p>
<p>Access-Control-Allow-Credentials: true  // 允许携带 cookie</code></pre><h4>2. JSONP</h4>
<p>利用 <code><script></code> 标签不受同源策略限制的特性：</p>
<pre><code>function jsonp(url, callback) {</p>
<p>  const script = document.createElement(&#039;script&#039;);</p>
<p>  script.src = <code>${url}?callback=${callback}</code>;</p>
<p>  document.body.appendChild(script);</p>
<p>}</code></pre>
<p><strong>限制</strong>: 只支持 GET 请求</p><h4>3. 代理服务器</h4>
<p>开发环境使用代理，生产环境使用 Nginx 反向代理：</p>
<pre><code>// webpack devServer 配置</p>
<p>proxy: {</p>
<p>  &#039;/api&#039;: {</p>
<p>    target: &#039;http://localhost:3000&#039;,</p>
<p>    changeOrigin: true</p>
<p>  }</p>
<p>}</code></pre><h4>4. postMessage</h4>
<p>用于跨窗口、跨域通信：</p>
<pre><code>// 发送消息</p>
<p>window.postMessage(&#039;data&#039;, &#039;https://target-origin.com&#039;);</p><p>// 接收消息</p>
<p>window.addEventListener(&#039;message&#039;, (event) =&gt; {</p>
<p>  if (event.origin === &#039;https://target-origin.com&#039;) {</p>
<p>    // 处理消息</p>
<p>  }</p>
<p>});</code></pre><h4>5. document.domain</h4>
<p>适用于主域相同、子域不同的情况（已废弃）</p><h3>预检请求（Preflight）</h3>
<p>对于复杂请求，浏览器会先发送 OPTIONS 请求进行预检，服务器需要正确响应预检请求。</p><h3>注意事项</h3>
<ul><li>CORS 是最推荐的解决方案</li></ul>
<ul><li>JSONP 存在安全风险，已不推荐使用</li></ul>
<ul><li>开发环境可以使用代理，生产环境建议使用 CORS</li></ul>
      </div>
    </div>
  </div>
</div>
<script src="知识库.js"></script>
</body>
</html>